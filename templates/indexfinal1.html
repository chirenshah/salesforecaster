
<!DOCTYPE HTML>
<html lang="en">
    <head>

        <link rel="icon" href="{{url_for('static', filename='logo.png')}}" type="image/gif" sizes="16x16">
        <link rel="stylesheet" type="text/css" href="../static/styling.css">
        <link href='https://fonts.googleapis.com/css?family=Lato:100,300,400,300italic' rel="stylesheet" type="text/css">
        <title>CASPredicts</title>

    </head>
    <body>
        <header>
            
                
     <nav>
            <div class="row">
                <img src="{{url_for('static', filename='logo.png')}}" alt="logo" class="logo">
                
                
                <ul class="main-nav">
                    <li><a href="#id0"  >Home </a></li>
                    <li><a href="#id1" > Steps To Predict </a></li>
                    <li><a href="#id2" > Upload dataset </a></li>
                   

                    <li><a href="#id4" onclick="document.getElementById('id01').style.display='block'"   >Sign up </a></li>
                   </ul>
                
            
             </div>
            
            
            <div id="id01" class="modal">

                    <form method="post" class="modal-content animate" action="">


                      <div class="cont">
                        <div class="hand"><p align="center">SIGN UP</p></div>
                        <input type="text" placeholder="Enter Firstname" name="fname" required>
                        <input type="text" placeholder="Enter Lastname" name="lname" required><br>
                        <input type="text" placeholder="Enter Email id" name="email" required>
                        <input type="password" placeholder="Enter Password" name="psw" required><br>
                        <input type="password" placeholder="Confirm Password" name="psw1" required>
                        <input type="text" placeholder="Enter Contact no." name="contact" required>



                      </div>

             <div class="cont" style="background-color:#f1f1f1">
               <a href="index1.html"><button type="submit" name='submit'>Signup</button></a>
                <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button> <br>
                <span class="psw" >Already Registered?  <a id="switchForm" href="#"  onclick="document.getElementById('id02').style.display='block'" >Login</a></span>
            </div>
        </form>
                 
                 </div>
     


            <div id="id02" class="modal">
                <form id="login_form" class="modal-content" action="/action_page.php">


                      <div class="cont">
                        <div class="hand"><p align="center">SIGN IN</p></div><hr>
                        <input type="text" placeholder="Enter registered email id" name="lemail" required>
                        <input type="password" placeholder="Enter Password" name="lpsw" required><br>


                      </div>

            <div class="container" style="background-color:#f1f1f1">
                <button type="submit">Login</button>
                <button type="button" onclick="document.getElementById('id02').style.display='none'" class="cancelbtn">Cancel</button>

            </div>
                </form>
                </div>


            </nav>
             
          
            <div class="hero-text-box">
         
                
             <div> </div>
                             
            <h1>Turn Data into Opportunity.<br> Turn Predicted Dreams into Reality!</h1>
                
                
            </div>
                     
            
        </header>
        
        
        
      <section class="section-steps" id="id3">
          <div class="row">
              <br>
              <br>
              <br>
              
              <h2>HOW IT WORKS &mdash; AS SIMPLE AS 1,2,3</h2>
          </div>
          <div class="row"><br> <br>
              <div class="col span 1-of-2"> 
    
            </div>
              <div class="col span 1-of-2"> 
                  <div class="work-steps">
                      <div>1</div>
                      <p>Upload Your Excel Sheet</p>
                    </div>
                  
                   <div class="work-steps">
                      <div>2</div>
                      <p>Select your Target <br> And the Time Attribute for which you want to Predict Sales along with mode</p>
                    </div>
                  
                   <div class="work-steps">
                      <div>3</div>
                      <p>Check your Predicted Sales</p>
                    </div>
                  <a href="#" class="btn-app"><img src="{{url_for('static', filename='4.jpeg')}}" alt="appstorebtn"></a>
        
              </div>
          </div>
                      
    </section>
        

        
        <section class="meal-plans js--meal-plans" id="id1">
            <h2>DROP ZONE</h2>
            
            <div class="drop-zone">
                    <span class="drop-zone__prompt">Drop file here or click to upload</span>
                    <form id="upload-file" method="POST" enctype="multipart/form-data"> 
                          <input type="file" name="myFile" class="drop-zone__input">
                          <button id="upload-file-btn" type="button"><p>Upload</p></button>
                    </form>
                  <script>
                    

                    document.querySelectorAll(".drop-zone__input").forEach((inputElement) => {
      const dropZoneElement = inputElement.closest(".drop-zone");

      dropZoneElement.addEventListener("click", (e) => {
        inputElement.click();
      });

      inputElement.addEventListener("change", (e) => {
        if (inputElement.files.length) {
          updateThumbnail(dropZoneElement, inputElement.files[0]);
        }
      });

      dropZoneElement.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZoneElement.classList.add("drop-zone--over");
      });

      ["dragleave", "dragend"].forEach((type) => {
        dropZoneElement.addEventListener(type, (e) => {
          dropZoneElement.classList.remove("drop-zone--over");
        });
      });

      dropZoneElement.addEventListener("drop", (e) => {
        e.preventDefault();

        if (e.dataTransfer.files.length) {
          inputElement.files = e.dataTransfer.files;
          updateThumbnail(dropZoneElement, e.dataTransfer.files[0]);
        }

        dropZoneElement.classList.remove("drop-zone--over");
      });
    });

    /**
     * Updates the thumbnail on a drop zone element.
     *
     * @param {HTMLElement} dropZoneElement
     * @param {File} file
     */
    function updateThumbnail(dropZoneElement, file) {
      let thumbnailElement = dropZoneElement.querySelector(".drop-zone__thumb");
      document.getElementById('upload-file-btn').style.display = 'none';
      document.querySelector('#loader-container').style.display = "block";

      // First time - remove the prompt
      if (dropZoneElement.querySelector(".drop-zone__prompt")) {
        dropZoneElement.querySelector(".drop-zone__prompt").remove();
      }

      // First time - there is no thumbnail element, so lets create it
      if (!thumbnailElement) {
        thumbnailElement = document.createElement("div");
        thumbnailElement.classList.add("drop-zone__thumb");
        dropZoneElement.appendChild(thumbnailElement);
      }

      thumbnailElement.dataset.label = file.name;

      // Show thumbnail for image files
      if (file.type.startsWith("image/")) {
        const reader = new FileReader();

        reader.readAsDataURL(file);
        reader.onload = () => {
          thumbnailElement.style.backgroundImage = `url('${reader.result}')`;
        };
      } else {
        thumbnailElement.style.backgroundImage = null;
      }
      var form_data = new FormData($('#upload-file')[0]);
      console.log($('#upload-file')[0]);
                            $.ajax({
                                type: 'POST',
                                url: '/uploadajax',
                                data: form_data,
                                contentType: false,
                                cache: false,
                                processData: false,
                                success: function(data) {
                                    console.log('Success!');
                                },
                            });
      statusChecker();
    }</script>
            </div>
          <div style="display: none;" id="loader-container">
            <div class="loader-16"></div>
            <p>Please wait while we analyse your data</p>    
          </div>
            <form action="/selection" method="post">
              <button type="submit" id="submit" style="display: none;">Submit</button>
            </form>
        </section>
        
 
<script src="https://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
<script type="text/javascript"> 
    function statusChecker(){
      var check = setInterval(() => {
        $.ajax({
                  type: 'POST',
                  url: '/status',
                  data: {"chiren":"shah"},
                  contentType: false,
                  cache: false,
                  processData: false,
                  success: function(data) {
                    if(data == "True"){
                      document.querySelector('#submit').style.display = 'block';
                      document.querySelector('#loader-container').style.display = 'none';
                      clearInterval(check);
                    }
                    else{
                      console.log(data);
                    }
                  },
                });
      }, 5000);
    }
  </script>

</body>
</html>
